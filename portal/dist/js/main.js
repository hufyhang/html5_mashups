define("userAgent",[],function(){var e=function(){var e=window.navigator.userLanguage||window.navigator.language;return{lang:e}};return{meta:e()}}),define("market",[],function(){var e="http://feifeihang.info/hypermash/portal/php/loadProjectMarket.php",t=Ribs.Model.make({fetch:{url:e,method:"GET"}});return{Market:t}}),define("marketView",["userAgent","market"],function(e,t){var n=e.meta,r=Ribs.make(t.Market),i=Ribs.View.make({el:$(".panels"),template:$("#panel-template").html(),render:function(){r.fetch({done:function(e){i.renderData(e)}})}});return i.renderData=function(e){if(e==='{"projects": ]}'||e==='{"projects": ]}\n'){i.el.html("<i>Oops... We found nothing on our server...</i>");return}var t=JSON.parse(e);console.log(t);var r="http://feifeihang.info/hypermash/projects/rdfa.php?lang="+n.lang+"&uid=";for(var s in t.projects)if(t.projects.hasOwnProperty(s)){var o=t.projects[s];o.contextDesc=r+o.md5,o.description=o.description.replace(/\$quot;/g,'"')}i.el.html(_.template(i.template,{data:t.projects}))},{View:i}}),define("search",[],function(){var e=Ribs.Model.make({fetch:{url:"http://feifeihang.info/hypermash/portal/php/search.php",method:"POST"}});return{Search:e}}),define("searchView",["search","marketView"],function(e,t){var n=Ribs.make(e.Search),r=Ribs.make(t.View),i="";i+='<div><input type="text" class="form-control" id="search-input" ',i+='placeholder="keywords..."/><div class="btn btn-default" id="search-btn">Search</div></div>';var s=function(){var e=$("#search-input").val();n.fetch({data:{keywords:e},done:function(e){r.renderData(e)}})},o=Ribs.View.make({el:$(".search-panel"),template:$("#panel-template"),render:function(){o.el.html(i)},events:{"#search-btn":{on:"click",fire:"doSearch"},"#search-input":{on:"keypress",fire:"keySearch"}},keySearch:function(e){e.which===13&&s()},doSearch:function(){s()}});return{View:o}}),require(["marketView","searchView"],function(e,t){var n=Ribs.make(e.View),r=Ribs.make(t.View),i=$(window),s=$("#goto-top");s.css("display","none"),i.on("scroll",function(){i.scrollTop()===0?s.hide():s.show()}),$("#goto-top").on("click",function(){window.scrollTo(0,0)}),Ribs.Router.route({home:function(){r.render(),n.render()}}),Ribs.Router.navigate("home")}),define("main",function(){});